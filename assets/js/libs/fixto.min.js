var fixto=function(t,i,e){function o(){this._vendor=null}function s(){var t=!1,i=e.createElement("div"),o=e.createElement("div");return i.appendChild(o),i.style[c]="translate(0)",i.style.marginTop="10px",i.style.visibility="hidden",o.style.position="fixed",o.style.top=0,e.body.appendChild(i),o.getBoundingClientRect().top>0&&(t=!0),e.body.removeChild(i),t}function n(i,e,o){this.child=i,this._$child=t(i),this.parent=e,this.options={className:"fixto-fixed",top:0},this._setOptions(o)}function r(t,i,e){n.call(this,t,i,e),this._replacer=new p.MimicNode(t),this._ghostNode=this._replacer.replacer,this._saveStyles(),this._saveViewportHeight(),this._proxied_onscroll=this._bind(this._onscroll,this),this._proxied_onresize=this._bind(this._onresize,this),this.start()}function h(t,i,e){n.call(this,t,i,e),this.start()}var l=function(){var t={getAll:function(t){return e.defaultView.getComputedStyle(t)},get:function(t,i){return this.getAll(t)[i]},toFloat:function(t){return parseFloat(t,10)||0},getFloat:function(t,i){return this.toFloat(this.get(t,i))},_getAllCurrentStyle:function(t){return t.currentStyle}};return e.documentElement.currentStyle&&(t.getAll=t._getAllCurrentStyle),t}(),p=function(){function i(t){this.element=t,this.replacer=e.createElement("div"),this.replacer.style.visibility="hidden",this.hide(),t.parentNode.insertBefore(this.replacer,t)}return i.prototype={replace:function(){var t=this.replacer.style,i=l.getAll(this.element);t.width=this._width(),t.height=this._height(),t.marginTop=i.marginTop,t.marginBottom=i.marginBottom,t.marginLeft=i.marginLeft,t.marginRight=i.marginRight,t.cssFloat=i.cssFloat,t.styleFloat=i.styleFloat,t.position=i.position,t.top=i.top,t.right=i.right,t.bottom=i.bottom,t.left=i.left,t.display=i.display},hide:function(){this.replacer.style.display="none"},_width:function(){return this.element.getBoundingClientRect().width+"px"},_widthOffset:function(){return this.element.offsetWidth+"px"},_height:function(){return jQuery(this.element).outerHeight()+"px"},_heightOffset:function(){return this.element.offsetHeight+"px"},destroy:function(){t(this.replacer).remove();for(var i in this)this.hasOwnProperty(i)&&(this[i]=null)}},e.documentElement.getBoundingClientRect().width||(i.prototype._width=i.prototype._widthOffset,i.prototype._height=i.prototype._heightOffset),{MimicNode:i,computedStyle:l}}();o.prototype={_vendors:{webkit:{cssPrefix:"-webkit-",jsPrefix:"Webkit"},moz:{cssPrefix:"-moz-",jsPrefix:"Moz"},ms:{cssPrefix:"-ms-",jsPrefix:"ms"},opera:{cssPrefix:"-o-",jsPrefix:"O"}},_prefixJsProperty:function(t,i){return t.jsPrefix+i[0].toUpperCase()+i.substr(1)},_prefixValue:function(t,i){return t.cssPrefix+i},_valueSupported:function(t,i,e){try{return e.style[t]=i,e.style[t]===i}catch(t){return!1}},propertySupported:function(t){return void 0!==e.documentElement.style[t]},getJsProperty:function(t){if(this.propertySupported(t))return t;if(this._vendor)return this._prefixJsProperty(this._vendor,t);var i;for(var e in this._vendors)if(i=this._prefixJsProperty(this._vendors[e],t),this.propertySupported(i))return this._vendor=this._vendors[e],i;return null},getCssValue:function(t,i){var o=e.createElement("div"),s=this.getJsProperty(t);if(this._valueSupported(s,i,o))return i;var n;if(this._vendor&&(n=this._prefixValue(this._vendor,i),this._valueSupported(s,n,o)))return n;for(var r in this._vendors)if(n=this._prefixValue(this._vendors[r],i),this._valueSupported(s,n,o))return this._vendor=this._vendors[r],n;return null}};var f,d,a=new o,c=a.getJsProperty("transform"),u=a.getCssValue("position","sticky"),_=a.getCssValue("position","fixed");"Microsoft Internet Explorer"===navigator.appName&&(d=parseFloat(navigator.appVersion.split("MSIE")[1])),n.prototype={_mindtop:function(){var t=0;if(this._$mind)for(var i,e,o=0,s=this._$mind.length;o<s;o++)if(i=this._$mind[o],(e=i.getBoundingClientRect()).height)t+=e.height;else{var n=l.getAll(i);t+=i.offsetHeight+l.toFloat(n.marginTop)+l.toFloat(n.marginBottom)}return t},stop:function(){this._stop(),this._running=!1},start:function(){this._running||(this._start(),this._running=!0)},destroy:function(){this.stop(),this._destroy(),this._$child.removeData("fixto-instance");for(var t in this)this.hasOwnProperty(t)&&(this[t]=null)},_setOptions:function(i){t.extend(this.options,i),this.options.mind&&(this._$mind=t(this.options.mind)),this.options.zIndex&&(this.child.style.zIndex=this.options.zIndex)},setOptions:function(t){this._setOptions(t),this.refresh()},_stop:function(){},_start:function(){},_destroy:function(){},refresh:function(){}},r.prototype=new n,t.extend(r.prototype,{_bind:function(t,i){return function(){return t.call(i)}},_toresize:8===d?e.documentElement:i,_onscroll:function(){if(this._scrollTop=e.documentElement.scrollTop||e.body.scrollTop,this._parentBottom=this.parent.offsetHeight+this._fullOffset("offsetTop",this.parent),this.fixed){if(this.options.toBottom){if(this._scrollTop>=this._fullOffset("offsetTop",this._ghostNode))return void this._unfix()}else if(this._scrollTop>this._parentBottom||this._scrollTop<=this._fullOffset("offsetTop",this._ghostNode)-this.options.top-this._mindtop())return void this._unfix();this._adjust()}else{var t=l.getAll(this.child);(this._scrollTop<this._parentBottom&&this._scrollTop>this._fullOffset("offsetTop",this.child)-this.options.top-this._mindtop()&&this._viewportHeight>this.child.offsetHeight+l.toFloat(t.marginTop)+l.toFloat(t.marginBottom)||this.options.toBottom)&&(this._fix(),this._adjust())}},_adjust:function(){var i=0,e=this._mindtop(),o=0,s=l.getAll(this.child),n=null;if(f&&(n=this._getContext())&&(i=Math.abs(n.getBoundingClientRect().top)),(o=this._parentBottom-this._scrollTop-(this.child.offsetHeight+l.toFloat(s.marginBottom)+e+this.options.top))>0&&(o=0),this.options.toBottom);else{var r=this.options.top;0===r&&(r=t("body").offset().top),this.child.style.top=Math.round(o+e+i+r-l.toFloat(s.marginTop))+"px"}},_fullOffset:function(t,i,e){for(var o=i[t],s=i.offsetParent;null!==s&&s!==e;)o+=s[t],s=s.offsetParent;return o},_getContext:function(){for(var t,i=this.child,o=null;!o;){if((t=i.parentNode)===e.documentElement)return null;if("none"!==l.getAll(t)[c]){o=t;break}i=t}return o},_fix:function(){var i=this.child,o=i.style,s=l.getAll(i),n=i.getBoundingClientRect().left,r=s.width;if(this.options._original,this._saveStyles(),e.documentElement.currentStyle&&(r=i.offsetWidth,"border-box"!==s.boxSizing&&(r-=l.toFloat(s.paddingLeft)+l.toFloat(s.paddingRight)+l.toFloat(s.borderLeftWidth)+l.toFloat(s.borderRightWidth)),r+="px"),f){this._getContext();n=this._$child.offset().left}if(this._replacer.replace(),o.left=n-l.toFloat(s.marginLeft)+"px",o.width=r,o.position="fixed",this.options.toBottom)o.top="",o.bottom=this.options.top+l.toFloat(s.marginBottom)+"px";else{o.bottom="";var h=this.options.top;0===h&&(h=t("body").offset().top),o.top=this._mindtop()+h-l.toFloat(s.marginTop)+"px"}this._$child.addClass(this.options.className),this.fixed=!0,this._$child.trigger("fixto-added")},_unfix:function(){var t=this.child.style;this._replacer.hide(),t.position=this._childOriginalPosition,t.top=this._childOriginalTop,t.bottom=this._childOriginalBottom,t.width=this._childOriginalWidth,t.left=this._childOriginalLeft,this.options.always||(this._$child.removeClass(this.options.className),this._$child.trigger("fixto-removed")),this.fixed=!1},_saveStyles:function(){var t=this.child.style;this._childOriginalPosition=t.position,this.options.toBottom?(this._childOriginalTop="",this._childOriginalBottom=t.bottom):(this._childOriginalTop=t.top,this._childOriginalBottom=""),this._childOriginalWidth=t.width,this._childOriginalLeft=t.left},_onresize:function(){this.refresh()},_saveViewportHeight:function(){this._viewportHeight=i.innerHeight||e.documentElement.clientHeight},_stop:function(){this._unfix(),t(i).unbind("scroll.fixto mousewheel",this._proxied_onscroll),t(this._toresize).unbind("resize.fixto",this._proxied_onresize)},_start:function(){this._onscroll(),t(i).bind("scroll.fixto mousewheel",this._proxied_onscroll),t(this._toresize).bind("resize.fixto",this._proxied_onresize)},_destroy:function(){this._replacer.destroy()},refresh:function(){this._saveViewportHeight(),this._unfix(),this._onscroll()}}),h.prototype=new n,t.extend(h.prototype,{_start:function(){var t=l.getAll(this.child);this._childOriginalPosition=t.position,this._childOriginalTop=t.top,this.child.style.position=u,this.refresh()},_stop:function(){this.child.style.position=this._childOriginalPosition,this.child.style.top=this._childOriginalTop},refresh:function(){this.child.style.top=this._mindtop()+this.options.top+"px"}});var g=function(t,i,e){return u&&!e||u&&e&&!1!==e.useNativeSticky?new h(t,i,e):_?(void 0===f&&(f=s()),new r(t,i,e)):"Neither fixed nor sticky positioning supported"};return d<8&&(g=function(){return"not supported"}),t.fn.fixTo=function(i,e){var o=t(i),s=0;return this.each(function(){var n=t(this).data("fixto-instance");n?n[i].call(n,e):t(this).data("fixto-instance",g(this,o[s],e)),s++})},{FixToContainer:r,fixTo:g,computedStyle:l,mimicNode:p}}(window.jQuery,window,document);