!function(e){function n(n){n.find("[data-selected-item]").each(function(){e(this).removeAttr("data-selected-item");var t=n.children("ul");n.is(".mobile-menu")&&t.slideDown()})}function t(n,t){e("body").off("tap.navigation-clear-selection"),e(window).off("scroll.navigation-clear-selection"),n.is(t)||e.contains(t[0],this)||s(t)}function i(i,a){n(i),a.attr("data-selected-item",!0),s(i,a),a.addClass("hover"),r(i,a),e("body").on("tap.navigation-clear-selection","*",function(){t(jQuery(this),i)}),e(window).on("scroll.navigation-clear-selection",function(){t(jQuery(this),i)})}function a(e){return e.is("[data-selected-item]")}function o(e){return e.find("[data-selected-item]").length>0||e.is("[data-selected-item]")}function s(n,t){n.find("li.hover").each(function(){t&&o(e(this))||e(this).removeClass("hover")})}function l(e,n){return n.parentsUntil("ul.dorpdown-menu").filter("li").length}function r(e,n){if(l(e,n)>0){var t=n.children("ul"),i=t.length&&n.offset().left+n.width()+300>window.innerWidth,a=t.length&&n.closest(".open-reverse").length;i||a?t.addClass("open-reverse"):t.length&&t.removeClass("open-reverse")}}e.event.special.tap||(e.event.special.tap={setup:function(n,t){e(this).bind("touchstart",e.event.special.tap.handler).bind("touchmove",e.event.special.tap.handler).bind("touchend",e.event.special.tap.handler)},teardown:function(n){e(this).unbind("touchstart",e.event.special.tap.handler).unbind("touchmove",e.event.special.tap.handler).unbind("touchend",e.event.special.tap.handler)},handler:function(n){var t=e(this);t.data(n.type,1),"touchend"!==n.type||t.data("touchmove")?t.data("touchend")&&t.removeData("touchstart touchmove touchend"):(n.type="tap",e.event.handle.apply(this,arguments))}}),e("ul.dropdown-menu").each(function(){var t=e(this);if(t.hasClass("mobile-menu")){var o=e('<a href="#" data-menu-toggler="">Menu</a>');t.before(o),o.click(function(){o.hasClass("opened")?(t.slideUp(300,function(){t.css("display","")}),t.removeClass("mobile-menu"),o.removeClass("opened")):(o.addClass("opened"),t.slideDown(),t.addClass("mobile-menu"),s(t),n(t))})}e("");t.on("tap.navigation","li.menu-item > a",function(o){var s=e(this),l=s.parent();if(l.children("ul").length)if(a(l)){var r=s.attr("href");if(0===r.indexOf("#")){var d=r.replace("#","").trim();if(!d||!e("#"+d).length)return}n(t)}else i(t,l),o.preventDefault(),o.stopPropagation();else n(t)}),t.on("mouseover.navigation","li",function(){t.find("li.hover").removeClass("hover"),r(t,e(this))})}),e(function(){window.wp&&window.wp.customize&&jQuery(".offcanvas_menu").find("li > ul").eq(0).each(function(){jQuery(this).show(),jQuery(this).parent().addClass("open")})})}(jQuery);